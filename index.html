<script>
// daftar balasan lebih santai & manja
const replies = {
    "hai": "haii sayang, kangen ga sama aku? ðŸ˜šðŸ’•",
    "kamu": "aku tuh kepikiran kamu terus tauu ðŸ˜³ðŸ’—",
    "love": "love you moree beb ðŸ˜˜ðŸ’ž",
    "rindu": "aku juga rinduu parah sama kamu ðŸ˜­ðŸ’•",
    "sayang": "iya sayang? sini aku peluk ðŸ˜šðŸ’—",
    "aku sayang kamu": "aku lebih sayang kamuuu! ga ada obat ðŸ˜¤ðŸ’—",
    "beb": "iya beb? sini sini aku peluk ðŸ˜˜ðŸ’•",
    "lagi apa": "lagi mikirin kamu lahh, kerjaannya itu mulu ðŸ˜ŒðŸ’—",
    "miss u": "miss u moreee, sumpah ðŸ˜©ðŸ’ž",
    "mwah": "mwahh balik 100x ðŸ˜˜ðŸ’•",
};

// fallback random reply
const randomReplies = [
    "ihh kamu kok gemes banget sihh ðŸ˜­ðŸ’—",
    "aku senyum sendiri baca ini ðŸ˜³ðŸ’•",
    "aku tuh kalo chat kamu langsung happy ðŸ˜©ðŸ’ž",
    "peluk dulu sini ðŸ¤—ðŸ’—",
    "kamu bikin hari aku lebih manis ðŸ˜˜âœ¨",
];

// typing indicator
function showTyping() {
    const chat = document.getElementById("chat");
    const bubble = document.createElement("div");
    bubble.classList.add("bubble", "bot");
    bubble.setAttribute("id", "typing");
    bubble.innerHTML = "â€¢â€¢â€¢";
    chat.appendChild(bubble);
    chat.scrollTop = chat.scrollHeight;
}

function removeTyping() {
    const typing = document.getElementById("typing");
    if (typing) typing.remove();
}

function autoReply(msg) {
    msg = msg.toLowerCase();

    for (let key in replies) {
        if (msg.includes(key)) {
            return replies[key];
        }
    }

    return randomReplies[Math.floor(Math.random() * randomReplies.length)];
}

function sendMessage() {
    const msg = document.getElementById("inputMsg").value;
    if (msg.trim() === "") return;

    addBubble(msg, "me");
    document.getElementById("inputMsg").value = "";

    // tampilkan typing...
    setTimeout(showTyping, 400);

    // bot membalas
    setTimeout(() => {
        removeTyping();
        addBubble(autoReply(msg), "bot");
    }, 1300);
}

function addBubble(text, type) {
    const chat = document.getElementById("chat");
    const bubble = document.createElement("div");
    bubble.classList.add("bubble", type);
    bubble.innerHTML = text;
    chat.appendChild(bubble);

    chat.scrollTop = chat.scrollHeight;
}
</script>
